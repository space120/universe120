:root{
  --bg:#f7f7fb;
  --card:#ffffffcc;
  --ink:#111;
  --muted:#666;
  --border:#e7e7ee;
  --brand:#3538ff;
}
html.contrast, :root.contrast{
  --bg:#ffffff;
  --card:#ffffff;
  --ink:#000;
  --muted:#222;
  --border:#000;
  --brand:#000;
}

*{box-sizing:border-box}
html,body{margin:0;height:100%;background:var(--bg);color:var(--ink);font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial}

.site-header,.site-footer{
  position:fixed;left:0;right:0;display:flex;align-items:center;gap:16px;
  background:#fff8; backdrop-filter:saturate(1.8) blur(8px); border-bottom:1px solid var(--border);
}
.site-header{top:0;padding:10px 16px}
.site-footer{bottom:0;justify-content:center;border-top:1px solid var(--border);border-bottom:none;padding:10px 16px}

.brand{display:flex;align-items:center;gap:10px;text-decoration:none;color:var(--ink);font-weight:700}
.logo{display:block}

.site-nav{margin-left:auto;display:flex;gap:14px}
.site-nav a{color:#222;text-decoration:none;padding:6px 10px;border-radius:8px}
.site-nav a:hover{background:#fff}
.site-nav a.active{background:#eef2ff;color:#2730a3}

.main{height:100vh;display:grid}
.panel{
  position:fixed;left:16px;top:64px;z-index:10;background:var(--card);
  border:1px solid var(--border);border-radius:12px;padding:12px 14px;max-width:320px;
  box-shadow:0 6px 22px rgba(0,0,0,.07)
}
.panel h1{margin:.25rem 0 .5rem;font-size:18px}
.row{display:flex;gap:8px;align-items:center;margin:.35rem 0}
label{font-size:12px;color:#444;min-width:94px}
input[type=range]{flex:1}
select,input[type=checkbox]{font-size:13px}
.tip{font-size:11px;color:var(--muted)}
.small{font-size:11px}
.pill{display:inline-block;background:#eef2ff;color:#3730a3;font-weight:600;border-radius:999px;padding:2px 8px;font-size:11px}

.toolbox{border:1px dashed var(--border); border-radius:10px; padding:8px 10px; margin:.5rem 0 0}
.toolbox legend{font-size:12px; color:#333; padding:0 6px}

/* Buttons (single definition) */
button{
  appearance:none;border:1px solid var(--border);background:#fff;border-radius:10px;
  padding:8px 12px;font-size:13px;cursor:pointer
}
button:hover{background:#f6f6ff}
button.primary{background:#3538ff;color:#fff;border-color:#3538ff}
button.secondary{background:#f2f2f8}

#canvas{display:block;width:100vw;height:100vh}

.page{padding:96px 20px 68px}
.page.narrow{max-width:860px;margin:0 auto}
.page .lead{font-size:1.15rem;color:#333}
.page h1{font-size:2rem;margin:.5rem 0 1rem}
.page h2{margin:1.25rem 0 .5rem}
.page p, .page li{line-height:1.65}

/* Larger hit targets on small screens */
@media (max-width: 600px){
  .panel { max-width: 92vw; left: 4vw; }
  .row button, .row select, .row input[type=range] { min-height: 40px; }
}

/* --- Toolbar with icons + labels --- */
.toolbar{
  position:fixed;left:12px;top:66px;z-index:18;
  display:flex;flex-direction:column;gap:10px
}
.tool{
  width:140px;height:44px;display:flex;align-items:center;gap:10px;
  border:1px solid var(--border);border-radius:10px;background:#fff;
  padding:6px 10px;cursor:pointer;text-align:left
}
.tool:hover{background:#f5f6ff}
.tool.active{outline:2px solid var(--brand)}
.tool .icon{
  width:24px;flex:0 0 24px;display:flex;align-items:center;justify-content:center;
  font-size:18px;line-height:1
}
.tool .label{font-size:13px;color:#111;line-height:1}

/* Optional: little legend card */
#legend{
  position:fixed;left:166px;top:66px;z-index:18;background:#ffffffcc;
  border:1px solid var(--border);border-radius:12px;padding:8px 10px;font-size:12px;
  box-shadow:0 8px 24px rgba(0,0,0,.08)
}
/* Blueprint theme */
:root.blueprint {
  --bg:#0d2a55;        /* paper blue */
  --card:#0f356d;
  --ink:#ffffff;       /* white ink */
  --muted:#d8e7ff99;
  --border:#1e4d9a;
  --brand:#ffe36a;     /* yellow highlight */
}
body.blueprint {
  background:
    radial-gradient(1200px 800px at 20% -10%, #16407e66 0%, #0d2a55 60%, #0b2449 100%),
    #0d2a55;
}
#canvas.blueprint {
  background-image:
    linear-gradient(#ffffff10 1px, transparent 1px),
    linear-gradient(90deg, #ffffff0f 1px, transparent 1px);
  background-size: 32px 32px, 32px 32px; /* subtle paper graph */
}

/* White drawing lines in blueprint mode */
body.blueprint canvas.draw-ink {
  filter: drop-shadow(0 0 1px #fff);
}

/* Selection outline + handles */
.sel-box { outline: 2px dashed var(--brand); outline-offset: -2px; }
.handle {
  width:10px;height:10px;border-radius:2px;
  background:var(--brand);border:1px solid #a88700;position:absolute;pointer-events:none;
}

/* Blueprint theme */
:root.blueprint {
  --bg:#0d2a55;        /* paper blue */
  --card:#0f356d;
  --ink:#ffffff;       /* white ink */
  --muted:#d8e7ff99;
  --border:#1e4d9a;
  --brand:#ffe36a;     /* yellow highlight */
}
body.blueprint {
  background:
    radial-gradient(1200px 800px at 20% -10%, #16407e66 0%, #0d2a55 60%, #0b2449 100%),
    #0d2a55;
}
#canvas.blueprint {
  background-image:
    linear-gradient(#ffffff10 1px, transparent 1px),
    linear-gradient(90deg, #ffffff0f 1px, transparent 1px);
  background-size: 32px 32px, 32px 32px; /* subtle paper graph */
}

/* White drawing lines in blueprint mode */
body.blueprint canvas.draw-ink {
  filter: drop-shadow(0 0 1px #fff);
}

/* Selection outline + handles */
.sel-box { outline: 2px dashed var(--brand); outline-offset: -2px; }
.handle {
  width:10px;height:10px;border-radius:2px;
  background:var(--brand);border:1px solid #a88700;position:absolute;pointer-events:none;
}
